# chatsoftware

服务器server记录在线的客户端及它们的IP地址和端口号。此处的端口号指客户端和其他客户端通信而绑定的端口号。

客户端每隔10秒向服务器注册一次。

服务器端周期性检查30秒内客户端是否向服务器注册，如果没有，则认为客户端已下线。

客户端每次向服务器注册，服务器将记录的客户端信息peerlist发送给客户端

客户端得到其他客户端的地址和端口号后，建立socket连接。

每个客户端分配两个端口号，一个与服务器通信，一个与其他所有联系人通信，通信采用UDP协议

客户端之间通信在tkinter窗口内进行

聊天窗口右侧显示在线的联系人，点击联系人会切换到与该联系人聊天的界面

Monitor实现了将服务器处的客户端信息在窗口中展示出来

通信采用UDP协议，在应用层做可靠性保证：

    客户端向联系人每发送一条消息，会将消息同时存储在消息队列中。并将已发送的总数加一
    客户端发送给联系人的正常报文包括三部分：此报文序列号+此报文正文+已收到的对方最新报文序列号。报文第三部分类似于TCP的捎带确认。
    客户端接收到对方的正常报文，如果新报文序列号 != 已接收的最新报文序列号+1，则向对方发送报错信息，并将该报文丢弃
    报错信息为 N+已收到的对方最新报文序列号
    客户端获得对方已收到的己方最新报文序列号后，将在消息队列中的过时报文丢弃
